---
name: spec-product-requirements
description: Product requirements document based on affordance theory
generated_from:
  - real.md
  - cog.md
---

# 产品需求文档（PRD）- ResearchFlash

## 1. 产品环境

**名称**: ResearchFlash（研究灵感速记本）

**标语**: 你的第二海马体：零摩擦捕捉，算法化重现

**版本**: 0.1.0

**环境描述**:
ResearchFlash 创造了一个"遗忘缓冲区"——一个介于短期记忆和长期笔记之间的行动空间。在这里，灵感可以被瞬间捕捉、安静潜伏、然后惊喜重现。它不是笔记软件，而是认知的外延。

**主要智能体**:
- 人类智能体（学术矿工、碎片思考者）：具备文字输入能力，注意力稀缺
- 系统智能体：具备定时推送、状态流转能力

**核心可供性**:
1. 捕捉可供性（Capture Affordance）：瞬间记录灵感
2. 重现可供性（Resurface Affordance）：被动接收旧灵感推送
3. 归档可供性（Archive Affordance）：确认处理后归档

---

## 2. 最小可供故事（MAS）

### MAS-1: 捕捉闪念（Capture Flash）

**故事主题**:
将转瞬即逝的灵感转化为持久记录，不打断当前心流

**核心可供性序列**:
1. **入口可供性**: 打开应用即见输入框（感知：空白输入区域 + 光标闪烁）
2. **输入可供性**: 直接打字/语音输入（感知：字符即时出现）
3. **提交可供性**: 点击发送或回车（感知：发送按钮）
4. **闭合可供性**: 灵感卡片淡入列表（感知：新卡片出现 + 轻微动画）

**意义闭合**:
灵感不再飘散，已被"第二海马体"安全接收。用户可以安心回到原来的事情。

**内在动机**:
- 兴趣：捕捉想法的满足感
- 自主：无强制分类，零压力
- 掌控：不再害怕遗忘

**不包含（超出范围）**:
- 搜索（属于 MAS-3）
- 编辑已有灵感（属于 MAS-3）
- 分类/标签（非必需）

---

### MAS-2: 惊喜重现（Resurface Flash）

**故事主题**:
沉睡的旧灵感在新情境中自动浮现，产生意外连接

**核心可供性序列**:
1. **通知可供性**: 收到推送通知（感知：系统通知 + 应用角标）
2. **查看可供性**: 点击通知进入回顾页（感知：灵感卡片列表）
3. **处理可供性**: 对每条灵感选择保留或归档（感知：操作按钮）
4. **闭合可供性**: 处理完成，页面清空（感知：空状态提示）

**意义闭合**:
重新发现被遗忘的想法，感受"原来我当时想过这个"的惊喜。

**内在动机**:
- 好奇：不知道会重现什么
- 连接：旧想法与当下新情境碰撞
- 成长：看到思维的轨迹

**触发条件**:
- 每周日晚 8 点自动推送
- 推送本周 7 天前创建的灵感（已进入 Surfaced 状态）

---

## 3. 环境约束（来自 real.md）

### 3.1 物理约束

| 约束 | 对可供性的影响 |
|------|---------------|
| 首屏必须直接展示输入框 | 入口可供性必须即时可见，禁止启动页/引导页/登录拦截 |
| 单条灵感限制 280 字 | 输入可供性有字数边界，超出时提示截断 |
| 支持离线写入 | 提交可供性不依赖网络，本地优先存储 |

### 3.2 结构约束

| 约束 | 对可供性的影响 |
|------|---------------|
| 每周日晚 8 点推送 | 重现可供性由系统定时触发，非用户主动 |
| 网络恢复后自动同步 | 数据最终一致性，用户无感知 |

### 3.3 安全约束

| 约束 | 对可供性的影响 |
|------|---------------|
| 本地存储优先 | 灵感数据默认不上传，保护隐私 |
| 设备 UUID 标识 | 用户身份本地化，无需注册登录 |

---

## 4. 感知通道

### 4.1 人类感知（视觉）

| 元素 | 感知到的行动 | 设计模式 |
|------|-------------|----------|
| 输入框 | 可输入文字 | 大面积空白 + placeholder + 光标 |
| 发送按钮 | 可提交灵感 | 图标按钮，位于输入框右侧 |
| 灵感卡片 | 可查看内容 | 圆角卡片 + 时间戳 + 状态标签 |
| 通知角标 | 有待处理内容 | 红点 + 数字 |

### 4.2 AI 感知（语义）

| 元素 | 语义标记 | 感知到的行动 |
|------|---------|-------------|
| `<textarea>` | aria-label="输入灵感" | 文本输入点 |
| `<button>` | data-action="submit-flash" | 提交动作 |
| `<article>` | data-entity="flash" | 灵感实体 |
| `<time>` | datetime="..." | 时间信息 |

---

## 5. 反馈机制

### 5.1 即时反馈（< 100ms）

| 行动 | 人类反馈 | 系统反馈 |
|------|---------|---------|
| 输入文字 | 字符出现 | 字数计数更新 |
| 点击发送 | 按钮状态变化 | 输入框清空 |

### 5.2 进行中反馈（< 1s）

| 行动 | 人类反馈 | 系统反馈 |
|------|---------|---------|
| 提交灵感 | 卡片淡入动画 | 本地存储完成 |
| 归档灵感 | 卡片淡出动画 | 状态更新 |

### 5.3 完成反馈（< 5s）

| 行动 | 人类反馈 | 系统反馈 |
|------|---------|---------|
| 处理完所有推送 | "本周回顾完成" 提示 | 列表清空 |
| 离线数据同步 | 无感知（静默） | 后台完成 |

---

## 6. 验收标准

### MAS-1: 捕捉闪念

| ID | 标准 | 人类测试 | 技术验证 |
|----|------|---------|---------|
| AFF-1.1 | 打开应用 < 300ms 见输入框 | 用户感知无延迟 | Performance API 测量 |
| AFF-1.2 | 输入即存，无需点击 | 失焦自动保存 | localStorage 写入 |
| AFF-1.3 | 280 字限制有提示 | 超出时显示字数 | 前端校验 |
| AFF-1.4 | 离线可写入 | 断网仍可操作 | Service Worker 缓存 |

### MAS-2: 惊喜重现

| ID | 标准 | 人类测试 | 技术验证 |
|----|------|---------|---------|
| AFF-2.1 | 周日晚 8 点收到推送 | 用户收到通知 | 定时任务触发 |
| AFF-2.2 | 推送内容为 7 天前灵感 | 时间匹配 | 状态流转逻辑 |
| AFF-2.3 | 可归档处理 | 按钮可点击 | 状态更新为 Archived |

---

## 7. 非可供性（明确不支持的行动）

| 行动 | 不支持原因 |
|------|-----------|
| 搜索灵感 | MVP 不需要，保持极简 |
| 编辑已有灵感 | 灵感是"快照"，不可修改 |
| 分类/标签 | 增加认知负担，违背零摩擦原则 |
| 分享灵感 | MVP 不需要社交功能 |
| 导出数据 | 后续版本实现 |

---

## 8. 技术实现要点

### 8.1 前端

- 框架：Next.js 15（App Router）
- UI：Tailwind CSS + shadcn/ui
- 离线支持：Service Worker + IndexedDB
- 状态管理：Zustand（轻量）

### 8.2 后端

- 运行时：Bun
- 数据库：Neon（PostgreSQL）
- ORM：Drizzle
- 定时任务：Vercel Cron

### 8.3 核心数据模型

```typescript
// flash 实体
interface Flash {
  id: string;           // 格式：YYYYMMDDHHmm
  content: string;      // 最大 280 字
  status: 'incubating' | 'surfaced' | 'archived';
  createdAt: Date;
  userId: string;       // 设备 UUID
}
```

---

## 9. 附录

### 9.1 状态流转图

```
[新建] → Incubating (7天)
           ↓ (定时任务触发)
        Surfaced (等待用户处理)
           ↓ (用户确认归档)
        Archived
```

### 9.2 MAS 优先级

| 优先级 | 故事 | 状态 |
|--------|------|------|
| MAS-1 | 捕捉闪念 | MVP 必须 |
| MAS-2 | 惊喜重现 | MVP 必须 |
| MAS-3 | 搜索回顾 | v1.0 |
| MAS-4 | 云端同步 | v1.0 |

---

**文档版本**: v1.0
**生成日期**: 2025-12-22
**生成方法**: 认知敏捷法 + 可供性理论
