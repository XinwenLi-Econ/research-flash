# 如何更好地与 Claude Code 对话

> 高效协作的实战技巧，让 AI 编程助手真正为你所用

## 一、核心原则

| 原则 | 说明 |
|------|------|
| **路径即上下文** | 给出明确的文件路径，比描述半天更高效 |
| **简洁即效率** | 1-3 句话下达指令，避免冗长解释 |
| **纠偏要及时** | 发现理解错误立即打断，不要等到做完 |
| **确认再执行** | 重要操作先让 AI 说明方案，确认后再动手 |

## 二、高效对话模式

### 模式 1：路径 + 指令（最常用）

```
/path/to/your/project/src/components
帮我检查这个目录下的组件是否都导出正确
```

```
/path/to/config.ts
这个配置文件需要新增 Redis 连接配置
```

**为什么有效**：直接给路径，AI 可以立即读取文件内容，无需猜测。

### 模式 2：参考 A 生成 B

```
参考 /path/to/example.md 的格式
生成 /path/to/new-file.md
```

```
根据 /path/to/schema.ts 的数据结构
更新 /path/to/api/routes.ts 中的接口定义
```

**为什么有效**：给出明确的输入输出，AI 能精准理解你的预期格式。

### 模式 3：逐步确认

```
User: 我想重构认证模块，你的建议？
AI: [分析并给出方案 A/B/C]
User: 采用方案 B
AI: [准备执行]
User: 可以，开始吧
```

**常用确认词**：

- "可以" — 同意方案
- "继续" — 继续执行
- "先跳过" — 暂时搁置
- "开始吧" — 启动任务

### 模式 4：即时纠偏

```
User: 把文件移动到 src 目录
AI: [执行移动操作]
User: 理解错误，不是移动，是复制。帮我回退
```

```
User: 生成数据库规格文档
AI: [生成了英文版]
User: 要中文版
```

**关键点**：发现方向错误立即喊停，不要等到 AI 做完再说。

## 三、不同任务的对话技巧

### 代码生成/修改

```
# 好的方式
在 /path/to/utils.ts 中新增一个日期格式化函数
要求：支持 YYYY-MM-DD 和 MM/DD/YYYY 两种格式

# 不好的方式
帮我写一个处理日期的函数
```

### 问题排查

```
# 好的方式
[截图]
这个报错如何解决？相关代码在 /path/to/service.ts

# 不好的方式
我的代码报错了，怎么办
```

### 文档生成

```
# 好的方式
根据 /path/to/src 目录结构
生成项目 README，包含：安装步骤、目录说明、常用命令

# 不好的方式
帮我写个文档
```

### 重构/迁移

```
# 好的方式
将 /path/to/old-structure 下的文件
按照 /path/to/new-structure 的组织方式重构
保持相对引用路径正确

# 不好的方式
帮我整理一下代码结构
```

## 四、提高成功率的技巧

### 1. 用「参考」建立标准

当你有满意的示例时，让 AI 参考它：

```
参考 /path/to/component-a.tsx 的写法
生成 component-b.tsx
```

### 2. 用「检查」防止遗漏

完成一项任务后，要求 AI 检查关联文件：

```
上面的修改完成后
检查 /path/to/related-files 下是否有需要同步更新的地方
```

### 3. 用「同步更新」保持一致

修改一处时，提醒 AI 更新所有相关位置：

```
将 userId 改为 user_id
同步更新项目中所有相关引用
```

### 4. 用「约束」明确边界

给出明确的限制条件：

```
优化这个函数的性能
约束：不要改变函数签名，不要引入新依赖
```

### 5. 用截图 + 路径组合排查 UI 问题

```
[截图：显示错误界面]
相关代码在 /path/to/page.tsx
请检查问题原因
```

## 五、常见错误与纠正方式

| 场景 | 纠正方式 |
|------|----------|
| AI 放错文件位置 | "放错位置了，应该在 /correct/path 下" |
| AI 理解范围过大/过小 | "不是整个目录，只需要处理 *.ts 文件" |
| AI 用错术语/命名 | "这里应该叫 xxx，不是 yyy" |
| AI 执行了错误操作 | "帮我回退刚才的修改" |
| AI 遗漏了关联文件 | "还需要同步更新 /path/to/related.ts" |

## 六、进阶技巧

### 1. 建立项目记忆（CLAUDE.md）

在项目根目录创建 `CLAUDE.md` 文件，写入：

- 项目技术栈
- 命名规范
- 常用命令
- 目录结构说明

这样每次对话 AI 都会自动读取这些上下文。

```markdown
# CLAUDE.md 示例

## 技术栈
- 运行时：Bun
- 框架：Next.js 15
- 数据库：PostgreSQL

## 命名规范
- 组件：PascalCase
- 函数：camelCase
- 常量：UPPER_SNAKE_CASE

## 常用命令
- 启动开发：bun dev
- 运行测试：bun test
- 构建：bun run build
```

### 2. 使用 Rules 固化规范

在 `.claude/rules/` 目录下创建规则文件：

```markdown
# .claude/rules/naming-convention.md

- 组件文件使用 PascalCase
- 工具函数使用 camelCase
- 常量使用 UPPER_SNAKE_CASE
- API 路由使用 kebab-case
```

```markdown
# .claude/rules/code-style.md

- 使用 TypeScript 严格模式
- 优先使用函数式组件
- 避免 any 类型
```

### 3. 复杂任务分步执行

```
第一步：先帮我分析当前的目录结构
[确认后]
第二步：生成重构方案
[确认后]
第三步：执行重构
```

### 4. 触发深度思考

遇到复杂架构决策时，使用 `ultrathink` 关键词：

```
这个模块的设计方案，请 ultrathink
```

## 七、对话效率清单

开始任务前，确保你提供了：

- [ ] **具体的文件路径**（而非模糊描述）
- [ ] **清晰的预期结果**（生成什么、改成什么样）
- [ ] **必要的参考示例**（如果有的话）
- [ ] **明确的约束条件**（不要做什么）

## 八、快速对照表

| 你想做的事 | 推荐说法 |
|------------|----------|
| 让 AI 读文件 | "读取 /path/to/file" |
| 让 AI 生成代码 | "在 /path/to/file 中新增 xxx 函数" |
| 让 AI 修改代码 | "将 /path/to/file 中的 A 改为 B" |
| 让 AI 检查问题 | "[截图] 这个问题如何解决" |
| 让 AI 解释代码 | "/path/to/file 这段代码的作用是什么" |
| 让 AI 重构 | "参考 A 的结构，重构 B" |
| 暂停当前任务 | "先跳过这个" |
| 回退错误操作 | "帮我回退" |
| 确认执行 | "可以" / "开始吧" |

## 九、实战示例

### 示例 1：新增功能

```
User: /src/lib/auth.ts
新增一个 validateToken 函数，用于验证 JWT token
要求：返回 { valid: boolean, payload?: any, error?: string }

AI: [生成代码]

User: 可以，同步更新 /src/types/auth.ts 中的类型定义
```

### 示例 2：排查问题

```
User: [截图：页面显示 500 错误]
相关 API 在 /src/app/api/users/route.ts
帮我排查原因

AI: [分析并定位问题]

User: 修复它，同时加上错误日志
```

### 示例 3：重构代码

```
User: 我想把 /src/utils 下的工具函数按功能分类
你的建议？

AI: [给出目录重构方案]

User: 采用方案 A，开始执行
记得同步更新所有引用路径
```

---

**记住**：Claude Code 是你的协作伙伴，不是读心术大师。你提供的上下文越清晰，它的输出就越精准。
