## 1

请使用 Claude Code 对我的项目进行完整初始化，包括以下步骤：

### 第一步：创建并配置 CLAUDE.md 文件

- 将 CLAUDE.md 文件内容翻译为中文
- 在文件中添加以下个人环境信息：
  - **设备**：搭载 Apple 芯片的 Mac 电脑
  - **Node.js 管理**：通过 bun 进行安装管理
  - **Python 环境**：通过 uv 配置
  - **Git代码托管平台**：cnb.cool
- 请确保所有后续沟通和回复都使用中文

### 第二步：初始化 Git 仓库

- 初始化 Git 仓库

### 第三步：创建完整的 .gitignore 文件

需要包含以下忽略项：

#### 系统文件
- `.DS_Store`

#### Node.js 相关
- 所有 `node_modules/` 目录
- `bun.lockb`
- `npm-debug.log*`
- `yarn-debug.log*`
- `yarn-error.log*`

#### Python 相关
- `.venv/`
- `__pycache__/`
- `.pytest_cache/`

#### Next.js 项目
- `.next/`
- `out/`
- `build/`

#### 环境变量文件
- `.env.local`
- `.env.development.local`
- `.env.test.local`
- `.env.production.local`

### 我本人习惯忽略的文件夹

- 'source'

### 第四步：提供项目初始化状态报告

完成上述所有设置后，请提供一个清晰的项目初始化状态报告。

## 2

请将 .42plugin 目录下的所有 Claude Skills 通过软连接的方式注册到项目的 .claude 目录中，成为能被本项目调用的claude Skill。

记得配置.claude/settings.local.json。

## 3

请根据下列内容，填写.42cog/meta/meta.md：

活水智聊（42chat）是一款面向个人用户与小型团队设计的 一款基于 Web 的多模型 AI 对话中枢，为频繁在不同模型间工作的个人用户提供统一入口。它将会话管理、模型切换、提示词模板、联网搜索与数据同步收拢到一致的交互中。在强制登录与基础角色的保障下，用户无需改变既有习惯即可获得更连贯的对话体验：对话被持续保存、可被检索，也可被导出；配置集中收纳、随时可测、按需启用。

活水智聊（42chat） 面向多模型重度用户，聚合登录、配置与切换，对话管理与检索，模板与联网搜索，以及云端同步与本地兜底。用户在单一界面持续完成跨模型交流，降低切换成本，保留知识积累，并在需要时获取实时信息。

作者：活水AI实验室（42ailab.com）
cnb仓库地址：https://cnb.cool/42ailab/42demo/42chatdemo

## 4

请使用已经注册好的Claude Skill：.claude/skills/meta-42cog/SKILL.md

生成real.md与cog.md，中文版。注意，如果以前有内容，直接备份在同文件夹后（加上日期后）替换。

## 5

请使用已经注册好的Claude Skill：.claude/skills/pm-product-requirements/SKILL.md

生成产品需求规格书：pr.spec.md，放在：/spec/pm 目录下面。

注意参考：

.42cog/real/real.md
.42cog/cog/cog.md

如有必要，请开多个task加速执行任务。注意：

可能需要在 Write 工具中包含 content 参数

## 6

请使用已经注册好的Claude Skill：.claude/skills/pm-user-story/SKILL.md

生成spec/pm/userstory.spec.md，放在：/spec/pm 目录下面。

注意，生成时参考：

.42cog/real/real.md
.42cog/cog/cog.md

还需要同步参考：

spec/pm/pr.spec.md

如有必要，请开多个task加速执行任务。注意：

可能需要在 Write 工具中包含 content 参数

## 7

请使用已经注册好的Claude Skill：.claude/skills/dev-system-architecture/SKILL.md

生成spec/dev/sys.spec.md，放在：spec/dev/目录下面。

注意，生成时参考：

.42cog/real/real.md
.42cog/cog/cog.md

还需要同步参考：

spec/pm/pr.spec.md
spec/pm/userstory.spec.md

如有必要，请开多个task加速执行任务。注意：

可能需要在 Write 工具中包含 content 参数

我们默认采取的技术栈是：

全站框架：Next.js，参考：https://github.com/vercel/next.js
css框架：Tailwind CSS，参考：https://github.com/tailwindlabs/tailwindcss
ui组件：shadcn/ui，参考：https://github.com/shadcn-ui/ui
包管理：bun，参考：https://bun.com
数据库：本地PostgreSQL，云端neon，参考：https://neon.com
ORM框架：Drizzle ORM，参考：https://github.com/drizzle-team/drizzle-orm
认证授权：Better Auth，参考：https://www.better-auth.com
AI框架：Vercel AI SDK，参考：https://ai-sdk.dev

## 8

请使用已经注册好的Claude Skill：.claude/skills/design-ui-design-v2/SKILL.md

注意，生成时参考：

.42cog/meta/meta.md
.42cog/real/real.md
.42cog/cog/cog.md

还需要同步参考：

spec/pm/pr.spec.md
spec/pm/userstory.spec.md
spec/dev/sys.spec.md

如有必要，请开多个task加速执行任务。注意：

可能需要在 Write 工具中包含 content 参数

——————


请根据规格书：/spec/design/ui.spec.md，生成网页。

——————

请帮我启用 TweakCN 实时预览，把以下代码添加到 `src/app/layout.tsx`：

<html lang="zh">
  <head>
    <script async crossOrigin="anonymous" src="https://tweakcn.com/live-preview.min.js" />
  </head>
  <body>{children}</body>
</html>


## 9（需要先安装neon插件；且手动创建42chatdemo-learn数据库

请使用已经注册好的Claude Skill：.claude/skills/dev-database-design/SKILL.md

生成数据库schema文件（schema.ts）。

注意，生成时参考：

.42cog/meta/meta.md
.42cog/real/real.md
.42cog/cog/cog.md

还需要同步参考：

spec/pm/pr.spec.md
spec/pm/userstory.spec.md
spec/dev/sys.spec.md

还需要同步参考：

https://neon.com/guides/neon-auth-nextjs

生成后，根据项目技术栈安装后端依赖。

---
（建议拆成两次对话）
---

请使用plugin:neon-plugin:neon找到42chatdemo-learn数据库，切换到开发分支，然后为我配置数据库连接，迁移并推送到neon数据库。

连接neon数据库时参考：.claude/skills/dev-database-design/references/neon-drizzle-tutorial.md



## [9]（全自动创建neon数据库，也需要先安装neon插件）

请使用已经注册好的Claude Skill：.claude/skills/dev-database-design/SKILL.md

生成数据库schema文件（schema.ts）。

注意，生成时参考：

.42cog/meta/meta.md
.42cog/real/real.md
.42cog/cog/cog.md

还需要同步参考：

spec/pm/pr.spec.md
spec/pm/userstory.spec.md
spec/dev/sys.spec.md

还需要同步参考：

https://neon.com/guides/neon-auth-nextjs

生成后，根据项目技术栈安装后端依赖。

---
（建议拆成两次对话）
---

请使用plugin:neon-plugin:neon创建一个新的数据库，项目名称为 42chatdemo-learn，PostgreSQL 版本 17。创建后，neon数据库切换到开发分支，然后为我配置数据库连接，迁移并推送到neon数据库。

创建neon数据库时参考：.claude/skills/dev-database-design/references/neon-drizzle-tutorial.md


# 10

请使用已经注册好的Claude Skill：.claude/skills/dev-coding/SKILL.md

生成 CRUD 代码。要求：

- 使用 server actions + api router 方案
- 向第三方提供一个简化版本的 api 查询接口：
  ```ts
  GET /api/v1/conversations
    - page, limit（分页）
    - q（搜索）
  
  GET /api/v1/conversations/:id
    - include=messages（可选包含消息）
  ```
- 创建 Mock 数据脚本 src/db/seed.ts
- 前端页面使用数据库数据

注意，生成时参考：

.42cog/meta/meta.md
.42cog/real/real.md
.42cog/cog/cog.md

还需要同步参考：

spec/pm/pr.spec.md
spec/pm/userstory.spec.md
spec/dev/sys.spec.md


# 11

请使用已经注册好的Claude Skill：.claude/skills/dev-quality-assurance/SKILL.md

对现有的 CRUD 操作进行自动化测试。要求：

- API 层：用 bun 直接调用测试
- UI 层：配置 Playwright MCP 进行端到端测试
  - 参考 spec/pm/userstory.spec.md
- 数据库：使用 Neon 开发分支隔离
- 使用 mock 数据



# 12

请使用已经注册好的Claude Skill：.claude/skills/dev-coding/SKILL.md

在 UI 聊天界面集成数据库 CRUD 操作。

注意，生成时参考：

spec/design/ui.spec.md



## 13

请使用已经注册好的Claude Skill：.claude/skills/dev-coding/SKILL.md

实装认证子系统 (Auth) 。要求：

- 只需要 email + 密码登录（不需要 OAuth）
- 不需要邮箱验证（注册后直接登录）、不需要密码重置功能
- 需要完整的登录/注册页面 UI
- 使用 RBAC 模型，拥有游客、普通用户、管理员角色

注意，生成时参考：

.42cog/meta/meta.md
.42cog/real/real.md
.42cog/cog/cog.md

还需要同步参考：

spec/pm/pr.spec.md
spec/pm/userstory.spec.md
spec/dev/sys.spec.md

还需要同步参考：

src/db/schema.ts
neon_auth 官方文档（使用 plugin:neon-plugin:neon 或 mcp:context7）


## 参考

spec/user/user.spec.md
spec/user/admin.spec.md
spec/pm/pr.spec.md
spec/pm/userstory.spec.md
spec/dev/sys.spec.md
spec/dev/db.spec.md
spec/dev/code.spec.md
spec/dev/qa.spec.md
spec/dev/devops.spec.md
spec/design/ui.spec.md
spec/design/graphic.spec.md
